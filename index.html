<!DOCTYPE html>
<html>
<head>
    <title>Bare Bones AR.js Demo</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene
        vr-mode-ui="enabled: false"
        arjs="sourceType: webcam; debugUIEnabled: false;"
        renderer="antialias: true; alpha: true">

        <a-camera gps-camera="minDistance: 5;"></a-camera>

    </a-scene>

    <script>
        window.onload = () => {
            navigator.geolocation.getCurrentPosition((position) => {
                const scene = document.querySelector('a-scene');

                // User's current location
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;

                // Calculate a position 20 meters north
                const metersNorth = 20;
                const earthRadius = 6378137; // in meters
                const latOffset = metersNorth / earthRadius;
                const newLat = lat + (latOffset * 180 / Math.PI);

                // Create the cylinder
                const cylinder = document.createElement('a-cylinder');
                cylinder.setAttribute('gps-entity-place', `latitude: ${newLat}; longitude: ${lon};`);
                cylinder.setAttribute('radius', '1');
                cylinder.setAttribute('height', '5');
                cylinder.setAttribute('color', 'magenta');

                scene.appendChild(cylinder);

                alert(`Cylinder placed 20m North of your location.`);
            }, (err) => {
                console.error("Error getting location:", err);
                alert("Could not get location. Please enable GPS.");
            });
        };
    </script>
</body>
</html>
